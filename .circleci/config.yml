version: 2
jobs:
  build:
    docker:
      - image: schmolt/hubris-circleci
    steps:
      - checkout
      - run:
          name: Server tests
          command: cd server; stack setup --stack-yaml=circleci.stack.yaml; stack test --stack-yaml=circleci.stack.yaml
      - run:
          name: Client build
          command: cd client; npm install; elm-package install; gulp build
