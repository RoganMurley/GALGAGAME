version: 2
jobs:
  build:
    docker:
      - image: arekczarnik/docker-circleci-haskell
    steps:
      - checkout
      - run:
          name: Server tests
          command: cd server; stack setup; stack test --stack-yaml=circleci.stack.yaml
      - run:
          name: Client build
          command: cd client; gulp build
